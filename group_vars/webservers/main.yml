---
# Variables for webservers group

# Web server choice
web_server: nginx

# Nginx settings
nginx_user: www-data
nginx_worker_processes: auto
nginx_worker_connections: 1024
nginx_keepalive_timeout: 65
nginx_client_max_body_size: 10M

# Virtual host settings
server_name: "{{ inventory_hostname }}"
document_root: "/var/www/{{ app_name }}/html"
app_port: 80
app_ssl_port: 443

# SSL settings
ssl_enabled: true
ssl_certificate_path: "/etc/ssl/certs/{{ app_name }}.crt"
ssl_certificate_key_path: "/etc/ssl/private/{{ app_name }}.key"
ssl_protocols: "TLSv1.2 TLSv1.3"
ssl_ciphers: "HIGH:!aNULL:!MD5"

# Firewall rules for web servers
firewall_allowed_ports:
  - "22/tcp"   
  - "80/tcp"   
  - "443/tcp"  

# Logging
access_log: "/var/log/nginx/{{ app_name }}_access.log"
error_log: "/var/log/nginx/{{ app_name }}_error.log"

# Health check endpoint
health_check_path: "/health"